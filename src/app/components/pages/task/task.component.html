<div class="task-container">
  <div class="main-header">
    <div class="breadcrumb-section">
      <div class="breadcrumb">
        <span class="breadcrumb-item">
          <span class="icon"></span>
          {{ getEspacioTrabajoName() }}
        </span>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-item" *ngIf="getEspacioName()">
          <span class="icon"></span>
          {{ getEspacioName() }}
        </span>
        <span class="breadcrumb-separator" *ngIf="getCarpetaName()">/</span>
        <span class="breadcrumb-item" *ngIf="getCarpetaName()">
          <span class="icon"></span>
          {{ getCarpetaName() }}
        </span>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-item current">
          <span class="icon"></span>
          {{ list?.nombre }}
        </span>
      </div>
    </div>
    <hr>

  <!-- Controles principales -->
    <div class="header-controls">
      <div class="view-selector">
        <button 
          [class]="'view-btn ' + (currentView === 'board' ? 'active' : '')"
          (click)="switchView('board')">
          <i class="bi bi-clipboard-fill"></i>
          <span class="view-label">Board</span>
        </button>
        <button 
          [class]="'view-btn ' + (currentView === 'list' ? 'active' : '')"
          (click)="switchView('list')">
          <i class="bi bi-list"></i>
          <span class="view-label">List</span>
        </button>
        <button 
          [class]="'view-btn ' + (currentView === 'gantt' ? 'active' : '')"
          (click)="switchView('gantt')">
          <i class="bi bi-kanban"></i>
          <span class="view-label">Gantt</span>
        </button>
        <button 
          [class]="'view-btn ' + (currentView === 'calendar' ? 'active' : '')"
          (click)="switchView('calendar')">
          <i class="bi bi-calendar"></i>
          <span class="view-label">Calendar</span>
        </button>
      </div>

      <!-- Botones adicionales -->
      <div class="action-buttons">
        <button class="btn-search" title="Search">
<i class="bi bi-search"></i>        </button>
        <button class="btn-filter" title="Filter">
<i class="bi bi-filter"></i>
        </button>
        <button class="btn-customize" title="Customize">
          <i class="bi bi-gear"></i>
        </button>
        <button class="btn-add-task" (click)="addNewTask()">
          <span class="icon">+</span>
          Add Task
        </button>
      </div>
    </div>
  </div>

  <!-- Sección de filtros (Bootstrap row) -->
  <div class="container-fluid filters-section">
    <div class="row g-2 align-items-end">
      <div class="col-12 col-sm-6 col-md-3 col-lg-2">
        <label class="form-label">Categoría</label>
        <input class="form-control" placeholder="Categoría" [(ngModel)]="filterCategory" (ngModelChange)="fetchTasks()" />
      </div>
      <div class="col-6 col-md-3 col-lg-2">
        <label class="form-label">Desde</label>
        <input class="form-control" type="date" [(ngModel)]="filterStartDate" (ngModelChange)="fetchTasks()" />
      </div>
      <div class="col-6 col-md-3 col-lg-2">
        <label class="form-label">Hasta</label>
        <input class="form-control" type="date" [(ngModel)]="filterEndDate" (ngModelChange)="fetchTasks()" />
      </div>
      <div class="col-6 col-md-3 col-lg-2">
        <label class="form-label">Prioridad</label>
        <select class="form-select" [(ngModel)]="filterPriority" (ngModelChange)="fetchTasks()">
          <option value="">Todas</option>
          <option value="Low">Low</option>
          <option value="Medium">Medium</option>
          <option value="High">High</option>
        </select>
      </div>
      <div class="col-6 col-md-3 col-lg-2">
        <label class="form-label">Estado</label>
        <select class="form-select" [(ngModel)]="filterStatus" (ngModelChange)="fetchTasks()">
          <option value="">Todos</option>
          <option *ngFor="let s of statuses" [value]="s.label">{{ s.label }}</option>
        </select>
      </div>
      <div class="col-6 col-md-3 col-lg-2">
        <label class="form-label">Asignado a</label>
        <select class="form-select" [(ngModel)]="filterAssignee" (ngModelChange)="fetchTasks()">
          <option value="">Todos</option>
          <option *ngFor="let t of teams" [value]="t.identificador">{{ t.nombres }}</option>
        </select>
      </div>
      <div class="col-12 col-md-3 col-lg-2 d-flex gap-2 justify-content-start justify-content-md-end mt-2 mt-md-0">
        <button class="btn btn-outline-secondary" (click)="clearFilters()">Limpiar</button>
      </div>
    </div>
  </div>

  <!-- Contenido de las vistas -->
  <div class="view-content">
    <!-- Vista de Lista -->
    <app-list-view 
      #listView
      *ngIf="currentView === 'list'"
      [list]="list"
      [espacioTrabajoIdentificador]="espacioTrabajoIdentificador"
      [espacioIdentificador]="espacioIdentificador"
      [carpetaIdentificador]="carpetaIdentificador"
      [tasks]="tasks"
      (refresh)="fetchTasks()">
    </app-list-view>

    <!-- Vista de Board (placeholder por ahora) -->
    <div *ngIf="currentView === 'board'" class="view-placeholder">
      <div class="placeholder-content">
        <span class="placeholder-icon">�</span>
        <h3>Vista Board</h3>
        <p>Esta vista estará disponible próximamente</p>
      </div>
    </div>

    <!-- Vista de Gantt (placeholder por ahora) -->
    <div *ngIf="currentView === 'gantt'" class="view-placeholder">
      <div class="placeholder-content">
        <span class="placeholder-icon">�</span>
        <h3>Vista Gantt</h3>
        <p>Esta vista estará disponible próximamente</p>
      </div>
    </div>
        <div *ngIf="currentView === 'gantt'" class="view-placeholder">
      <div class="placeholder-content">
        <span class="placeholder-icon">�</span>
        <h3>Vista Canlendario</h3>
        <p>Esta vista estará disponible próximamente</p>
      </div>
    </div>
  </div>
</div>
